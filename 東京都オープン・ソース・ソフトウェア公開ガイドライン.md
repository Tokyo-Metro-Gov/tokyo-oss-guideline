# 東京都オープンソース・ソフトウェア公開ガイドライン（β版（0.1.0版））

## オープンソース・ソフトウェア公開ガイドライン策定の背景と目的

### 新型コロナウイルス感染症対策サイト構築から見えてきた世界

新型コロナウイルス感染症が拡大の傾向を見せるなか、都では、今までに経験したことのない状況下で、正確な情報を都民に迅速に届けるため、「東京都新型コロナウイルス感染症対策サイト」を開設した。

このサイトは、日々変わる感染状況をワンストップで閲覧できるサイトとして立上げ、運用にあたっては、都だけではなくシビックテックと協働し、順次、その精度を高め、行政のクオリティ・オブ・サービス（以下「QOS」という。）の向上につなげていった。

具体的には、このサイトのソースコードを、GitHub（「[OSS&nbsp;の管理](#OSS&nbsp;の管理)」内の「[コラム：GitHub&nbsp;の仕組み](#コラム：GitHub&nbsp;の仕組み)」参照）を活用して公開することで、世界中から大小合わせて 2,000 件以上の改善要求が寄せられ、それらに対応することで、使いやすさを高めていった。この改善提案の中には台湾のデジタル担当大臣・唐鳳（オードリー・タン）氏からのものもあり、誰もが行政が提供するウェブサイトに対して貢献できることが示された好事例となった。

また、GitHub 上で公開したソースコードはオープンソース・ソフトウェア（以下「OSS」という。）として他の自治体でも利活用され、各地域における独自のコロナ対策サイトの構築にも貢献することとなった。令和 3 年 4 月 20 日現在、54 の地域において本サイトのソースコードを活用したサイトが構築されており、その総数は63件となっている。

さらには、そのうち、13 府県市が当該自治体の公式サイトとして運用するなど、日本全体の課題に対する地方自治体の連携強化にも資するものとなった。

このように、今までに経験したことのない状況下で、正確な情報を都民に迅速に届けることが求められる場面で、OSS という仕組みによってサービスを提供できたことは、都民のみならず国民に対しても大きな効果（貢献）があったものと考えられる。

### 都政の構造改革の推進

長期化するコロナ禍で、社会のデジタルシフトが加速している。こうした、社会の大きな変化、変革は、より良い社会を実現する好機ととらえることもできる。

このため、都は、DX（デジタル・トランスフォーメーション）の推進を梃子として、都政の QOS を向上させることで、都民の QOL（クオリティ・オブ・ライフ）を高め、誰もが安全・安心で幸せを享受できる社会の実現を目指していくこととしている。

これを受け、令和 3 年 3 月には、「シン・トセイ 都政の構造改革 QOS アップグレード戦略」を策定し、都庁自らがイノベーティブな存在になるとともに、市民、企業、大学、NPO など多様なプレイヤーとのコラボレーションにより社会課題を解決し、明るい未来の東京をつくり上げることを目標に掲げた。

この目標を実現するための一つの選択肢として、OSS の活用がある。都は、この OSS を積極的に活用し、シビックテック等との協働を実践し、成功事例を積み上げ、OSS に対する職員の意識改革を進めて行くこととしている。（OSS とは、機械ではなく人間にとって解釈や編集がしやすい形式のプログラムコードを無償で公開し、利用や改変、再配布が自由に許可されているソフトウェアのことを指す。）

### ガイドライン策定の目的

今回の感染症対策の経験を踏まえつつ、OSS 化がもたらす社会的効果を以下の2点と捉え、その効果を最大限に活かし、都政の QOS の向上を推進していくため、本ガイドラインを策定し、都全体で OSS 化に取り組んでいくものとする。

* 都が保有する知的資産（ソースコード）を公共財として、都民や他の自治体と共有することで、国内外から幅広く意見（修正改善意見）を聞くことが可能となり、これにより OSS 自体が自律的に発展し、都民にその利益を還元することが可能
* また、この動きを全国に波及させることで、行政などが類似するシステムを構築する際の開発時間とコストの縮減にも寄与

## OSS の定義

都は前述した OSS 化がもたらす社会的効果を最大限活用していくことを目指し、 都が公開する OSS（以下「**東京都 OSS**」という。）が持つべき要素について以下のとおり定義する。

### OSS に求められる要素

**東京都 OSS** として公開するものについては、以下の要素を持つものとする。

なお、「OSS に求められる要素」の記載内容は、OSI (Open Source Initiative) のオープンソースの定義 (The Open Source Definition) に準拠した内容となる。

#### 再配布の自由

都が開発したソースコードを公開することは、都民に対する行政サービス向上の可能性を引き上げることに対し多くのメリットがある。そのため、都が公開したソースコードの再配布の自由を確保するものであること。

#### ソースコード

「オープンソース」であるプログラムは、コンパイル済形式と同様にソースコードでの配布も許可されていること。また、公開されるソースコードは、プログラマがプログラムを変更しやすいものであること。

#### 派生ソフトウェアの配布が可能

ソフトウェアの変更と派生ソフトウェアの作成を可能とする。ただし、ライセンスの適用については、「[公開時のライセンス](#公開時のライセンス)」を参照するものとする。

#### 作者のソースコードの完全性 (integrity)

プログラム変更により派生したソフトウェアが、オリジナルのソースコードと区別できるものであること。また、**東京都 OSS** として公開されたソースコードから派生されたソフトウェアにおいては、その旨を明示するよう求めるものとする。

#### 個人やグループ、使用する分野によってのプログラムの利用用途限定の禁止

可能な限り多くの人々やグループに、平等に公開したソースコードを使用・利用することが認められているものであること。

#### 利用分野に対する利用制限の禁止

ライセンスはある特定の分野でプログラムを使うことを制限しないものであること。

#### ライセンスの配布

プログラムに付随する権利は、そのプログラムが再配布した者全てに等しく認められるものとし、使用者・利用者が何らかの追加的ライセンスに同意することを必要としないものであること。

#### 特定製品でのみ有効なライセンスの禁止

プログラムに付与された権利は、それがある特定の私有 (Proprietary) ソフトウェア配布物の一部であるということに依存するものであってはならない。プログラムをその配布物から取り出したとしても、そのプログラム自身のライセンスの範囲内で使用あるいは配布される限り、プログラムが再配布される全ての人々が、元のソフトウェア配布物において与えられていた権利と同等の権利を有することを保証するものであること。

#### 他のソフトウェアを制限するライセンスの禁止

ライセンスは、そのソフトウェアと共に配布される他のソフトウェアに制限を設けないものであること。

#### ライセンスの技術的中立性の保持

ライセンス中に、自由な開発を阻害するような特定の技術やインターフェース等の様式に強く依存するような規定を設けないものであること。

#### コラム：ローコード・ツールやノーコード・ツールを使ったアプリの公開

**“東京都 OSS”** として公開する場合は、OSS としての汎用性・拡張性を確保する必要があり、特定の私有 (Proprietary) ソフトウェア配布物の一部であるということに依存するものであってはならない。そのため、特定製品でのみ有効なライセンスの利用を禁止する。

しかしながら、膨大な行政手続や行政サービスを、迅速かつ効率よくデジタル化していくうえで、簡易なソフトウェアについては、ローコード・ツールやノーコード・ツールといった開発ツールの活用が欠かせないものとなりつつある。

また、ローコード・ツールで開発されたアプリについても、本ガイドラインの策定趣旨の一つである、行政などが類似するシステムを構築する際の開発時間とコストの縮減にも寄与できるものでもある。

これらのことから、ローコード・ツールを活用したアプリについては、**東京都 OSS** として公開はしないが、開発した各局は積極的に、各ローコード・ツールが提供しているコミュニティサイトなどにおいて、テンプレートなどとして公開していくことを推奨していくものとする。

### OSS 公開条件

OSS として公開することは、実運用しているサービス及び機能、並びに、処理に対応するソースコード及び内部仕様が、外部からも入手することができ、また、他のサービスやシステム開発の検討や再利用なども可能となる。このため、**東京都 OSS** として公開する場合には、以下の条件を課すものとする。

#### OSS化の検討

前記の「OSS に求められる要素」を満たすソースコードは、原則 OSS 化することを前提に、行政サービスの提供等の事業目的をもってシステムを開発し運用する各局（以下「OSS 所管局」という。）は、開発案件発足時において、[ガイドライン策定の目的](#ガイドライン策定の目的)に記載されている「社会的効果及びOSSとして公開することの価値の有無」を検討すること。（検討の結果、OSS としない決定をした際は、その理由についてデジタルサービス局に通知をすること。）

検討にあたっては、開発や公開そのものが目的ではなく、OSS として流通することによる価値（効果）を明確にするとともに、流通後の運用フェーズにおける保守や改修を想定した体制や維持経費等についても、検討しておかなければならないことに留意すること。

また、公開する範囲を設定のうえ、既存のプロジェクトの特定機能のみを切り出すことも可能とし、他方、ソースコードそのものに開発者独自の技術ノウハウがあり、そのため公開ができない場合は、OSS 化の対象外と判断しても良い。

なお、検討の対象として、都が開発するソースコードのすべてが OSS の対象となるわけではなく、既に開発が完了しているソースコードについては、当面は、改めて OSS とするか否かの検討は必要ないものとする。

#### OSS における権利の記載

OSS として公開するためには、その開発を実施した各組織・個人が、OSS の著作権を保有し、その権利をプロジェクトのオープンソース・ソフトウェア・ライセンスの下で有効化する必要がある。このため、OSS 化にあたっては、ソースコードの複製・配布・改良の範囲を検討のうえ、開発したコードを一般に公開するために必要なライセンスを決め、これに応じて著作物の権利をあらかじめ確保しておくこと。

なお、都が公開する OSS は、多くの人々にその利益を享受してもらうことのできる、広く流通しやすいものにするべきであり、例えば、ライセンス形式が非コピーレフト等を選択するのが望ましいが、行政として、OSS から派生していく"アプリ"等（以下、「派生製作物」という。）の質を、サービスの目的の公共性が高く信頼性が求められ、特に監理していくことが必要な場合は、準コピーレフトにより公開していくこともあることから、OSS 所管局は、事前にデジタルサービス局と協議のうえ、ライセンスを選定していくものとする。(「[公開時のライセンス](#公開時のライセンス)」参照）

#### 関連資料の公開

実装を容易にするための開発プロセス全体を通じて開発者が開発したコード、ドキュメント及びその他の関連資料等の知見を配信すること。

例えば、依存関係（該当する場合）を含む、ソフトウェアの構築、作成、インストール、取り扱うデータの形式やそのフォーマット、または使用方法に関するその他の関連する技術的詳細がそれに該当する。

#### OSS 公開後の評価

都の OSS 開発・公開をより良いものにするため、OSS 公開後、運用フェーズにおいて OSS 化したことの意義を、評価するための効果検証を行うこと。

## OSS の管理

**東京都 OSS** として公開する場合は、その OSS は以下のとおり管理する。

### OSS の管理基盤

OSS は自由な使用・利用を可能とすることを目指し、ソースコードを配信するものであるため、都においても、ソフトウェア開発プラットフォームである Git にて管理するものとする。

なお、Git を用いた共通基盤を提供する代表的なサービスとしては、GitHub が挙げられる。このため、当面は、デジタルサービス局が、本サービスを活用し、都 OSS 管理基盤を構築のうえ、各局担当者に適切なアクセス権限を付与しつつ、運用していくものとする。

#### GitHub における都公式アカウント表記等

| 都公式アカウント | プロフィール |
| :--------| :-------- |
| Tokyo-Metro-Gov | 都のアイコンを使用し "Tokyo Metropolitan Government" と表記 |

### 管理体制

都の OSS 管理基盤で管理する対象は、都が開発したものとする。

公開のタイミングや期間等、その他 OSS の公開に関する取り決めなど、管理にあたって必要となる事項は、デジタルサービス局と、OSS の開発主体となる OSS 所管局、開発事業者及び保守運用事業者（以下「開発保守業者」という。）が連携し、協議のうえ決定する。

また、各組織の具体的な役割は以下のとおりとする。

#### 各組織とその主な役割

| 組織 | 役割 |
| :--------| :-------- |
| 各局（OSS 所管局） | 開発予定アプリケーションを OSS 化対象とするかの検討、OSS の改善管理 |
| 開発保守業者 | OSS の開発、OSS のマージ、OSS の維持管理 |
| デジタルサービス局 | OSS の管理環境の維持・管理、各局からの OSS 化に関する相談、開発後の OSS の公開判断、OSS の公開・非公開の設定 |

なお、OSS 開発・公開に関する運用の詳細については「[公開及び保守運用に関する手順](#公開及び保守運用に関する手順)」に記載する。

#### コラム：GitHub の仕組み

GitHub とは、ソフトウェア開発者のため、Git（ソースコードのバージョンを管理するツール）を Web サービス上で利用できるようにした開発プラットフォーム。GitHub 上でソースコードを管理することで、世界中の開発者と一緒にソースコードのレビューやソフトウェアの開発を行うことができる。

一般的には、GitHub 上で管理されているソースコード群（以下「リポジトリ」という。）を、開発者が自身の開発環境にダウンロード（フォーク＆プル）し、改変（コミット）を加え、GitHub 上のリポジトリを更新（プッシュ）し、おおもとのソフトウェアのリポジトリの取込依頼（プルリクエスト）をしていくことでソフトウェアが完成していく。

都では、GitHub 上に都公式の GitHub アカウントを準備し、そこに完成したリポジトリをアップロードすることで OSS を公開していく。これにより行政サービス構築に係る開発保守業者がそれにアクセスし、自身の環境にダウンロードすることで、それを活用した行政サービスの開発・提供に係るコスト削減が可能となるなどのメリットも生まれる。

##### GitHub 開発のイメージ

![GitHub 開発のイメージ](https://i.imgur.com/RL5RkVg.jpg)

## 公開及び保守運用に関する手順

### 公開等作業にあたっての留意事項

都が OSS を公開する際、開発保守業者の納品物を都公式のものとして公開するという特殊な手順を取るため、公開時のほか、開発保守業者との契約時や公開後の保守運用、開発保守終了時にも留意が必要となる。

特に、OSS 化は、一般的なシステム開発以上に、保守運用が重要となるため、発注時の仕様書や経費積算には注意する必要がある。また、公開するソースコードについては、開発保守事業者が開発したソースコードを事業者内でソースコードレビューを確実に行うほか、外部から Pull request 等でパッチ提供があったものをマージする際もソースコードレビューを行うこと。

### 公開手順

OSS 所管局は、そのソースコードを OSS として公開を希望する際、デジタルサービス局は対象のサービスを確認・審査したのち、そのサービス毎に公開場所を準備する。

公開するソースコードについては、開発保守業者自身の保有する GitHub アカウント上のリモートリポジトリにコミットされているものを、都側アカウントでプッシュする方式、もしくは、プルリクエストを受けてマージする方式とする。

開発完了前、修正中のソースコードは、都としての認証は行わないものとし、OSS 所管局が修正等を確認した納品物のみ、都側アカウント公認の OSS（**東京都 OSS**）とする。

#### アカウントと各組織の関係

![アカウントと各組織の関係](https://i.imgur.com/z2aN0l7.jpg)

| 用語 | 意味 |
| -------- | -------- |
| フォーク | 複製元に、開発や援助の貢献を前提に、都のリモートリポジトリを開発者のリモートリポジトリとして複製すること。 |
| プル | 開発者のリモートリポジトリから開発環境のローカルリポジトリにダウンロードすること。 |
| クローン | 開発環境のローカルリポジトリから開発担当者自身の環境にリポジトリをダウンロードすること。 |
| プルリクエスト | 修正・変更を、他の開発者やリポジトリ管理者に通知すること。 |
| マージ | 他で変更を加えたファイル、フォルダをリポジトリに取り込むこと。 |
| プッシュ | 開発環境のローカルリポジトリの変更内容を、リモートリポジトリ取り込むこと。 |

以下に、OSS 開発案件の発足から一般公開するまでの手順及び各組織の役割について明記する。

##### OSS 開発から公開までの手順

![OSS 開発から公開までの手順](https://i.imgur.com/pTKTcYF.png)

##### OSS 公開までの役割分担

| # | 組織 | 役割 |
| -------- | -------- | -------- |
| 1 | 各局（OSS 所管局）|案件発足時に開発予定アプリケーションをOSS化対象とするか判断</br>OSS の開発する旨をデジタルサービス局担当窓口に連絡</br>開発対象の OSS の公開判断 |
| 2 | デジタルサービス局 | OSS の開発を予定している組織に対して、OSS 管理基盤 (GitHub) の情報（アクセス、アカウント）を各局に対して連絡</br>開発対象の納品物連絡を受け、OSS 公開の準備（開発保守業者公開から取得）を行い、OSS を公開</br>OSS の管理 |
| 3 | 開発保守業者 | OSS の開発 |
| 4 | 一般 | ー |

### 開発保守業者との契約締結時における留意点

#### 仕様書に明記すべき事項

開発保守業者との契約では、納品物の著作権を都に譲渡することを前提とした調達仕様とする必要がある。
また、OSS の性質上、都で使用する際の動作保証と契約不適合責任は、通常では対外的に無保証となるが、下記の要件を盛り込む必要がある。

* 都に対して、動作の保証と契約不適合責任条項に従うこと。
* 契約不適合状態になったことにより、納品物の更新を行う際は、公開対象のソースコードに対しても更新を行うものとする。
* 外部公開用のGitをベースにしたソースコード変更管理ツールを用いることで、都民等に対して、対外的な公開とバージョン管理を行えるよう開発、納品すること。
* コード作成時に利用したライブラリに脆弱性がないか定期的に確認し、脆弱性が発覚等した場合には、脆弱性を解消するよう、保守すること。
* 契約終了後も、都が OSS として公開を継続することを了承すること。
* 外部公開を行うべきでない性質の記述やファイル（データベース接続用のホスト名やパスワード、アクセスキー等）は、外部公開用のソースコード変更管理ツールの公開リポジトリを用いてはならない。

#### 担当者が注意すべき事項

開発工程上、納品がなされていないソースコードも開発保守業者のリポジトリに置かれる場合があるため、OSS 所管局はこれを許容する必要がある。

### 公開後の保守運用

外部からの個別改善リクエストや課題についての受付は、OSS 所管局にて行うものとし、また、都度対応とはせず、定期的なソースコードの修正の機会を設け対応し、バージョン管理を行うものとする。

修正・改善等を行ったバージョンの OSS の公開は、OSS 所管局がデジタルサービス局に対し、修正完了報告を行い、前記[公開手順](#公開手順)の方式で公開するものとする。

ただし、重大なソースコードの誤りや欠陥等が発見され、行政サービスに影響が甚大なものに関してはこの限りではなく、直ちに対処するものとする。また、ソースコード作成時に利用したライブラリ等に脆弱性が発見され、情報漏洩等の恐れがある場合も同様の対応とする。

なお、都は公的な機関として信頼できる OSS を公開することが求められる。このため、改善報告に対する対応状況を外部へ明確に示す必要がある。

また、改善に向けた対応については段階分けを行い、各々に対して初動（GitHub 内で対応開始を通知）及び進捗報告までの時間を定めることが重要である。

このため、例えば、緊急対応では 1 日以内の初動及び日毎の進捗報告、機能改善では 3 営業日以内の初動及び 5 営業日以内の進捗報告等、都民にわかりやすい表現で示していくものとする。

#### OSS の保守フロー

![OSS の保守フロー](https://i.imgur.com/HRujf0P.jpg)

#### OSS 保守における役割分担

| # | 組織 | 役割 |
| -------- | -------- | -------- |
| 1 | 各局（OSS 所管局） | OSSの改善管理</br>リリース計画の策定と連絡</br>改修内容確認</br>OSS のリリース判断</br>OSS のリリース完了のアナウンス |
| 2 | デジタルサービス局 | リリース計画の受付</br>改修納品物の取得、OSS の更新 |
| 3 | 開発保守業者 | 改修</br>OSS のリリース作業 |
| 4 | 一般 | 改善連絡 |

### 開発保守の終了

OSS は永続的に公開するものとせず、一定の期間経過後、OSS 所管局は、開発保守を継続するかの判断を行うこと。

上記「一定の期間経過後」とは、原則として都のサービス終了時点から、その後の 1 年間を保守期間として定めるものとし、本保守期間においては改善（脆弱性対応、機能改善等）を実施するものとする。

また、サービス終了後の本保守期間については、1 年経過後、1 年毎に、OSS 所管局において延長するか否かの判断を行うものとする。見直しの結果、開発保守終了が妥当と判断した場合は、以下の手順に従って、開発保守及び公開を終了する。

#### OSS 開発保守案件の終了

![OSS 開発保守案件の終了](https://i.imgur.com/OpDDvn8.jpg)

##### OSS 開発終了時における役割分担

| # | 組織 | 役割 |
| -------- | -------- | -------- |
| 1 | 各局（OSS 所管局） | GitHub アカウントの返却の受付</br>OSS の非公開判定 |
| 2 | デジタルサービス局 | GitHub アカウントの返却の受付</br>OSS の非公開判定</br>OSS の非公開設定 |
| 3 | 開発保守業者 | GitHub アカウント返却 |
| 4 | 一般 |　－　|

公開が終了したものに関しては別途 Archive 化することを検討

### その他

ソフトウェアが暗号化機能や、ニューラルネットワーク駆動の地理空間分析訓練機能等、輸出規制に該当する機能を有する場合は、輸出規制に留意する必要があるため、デジタルサービス局に事前に相談を行うこと。

開発保守業者が作成したソフトウェアを元に、都が新たなソフトウェアとして異なる開発保守業者に対して依頼を行う可能性がある場合は、作成の可否を仕様に明記すること。

## 公開時のライセンス

### OSS の体系と注意すべき点

OSS の公開にあたっては、適切な形式選定を行う必要がある。

OSS のライセンスの種類については大きく分けて「コピーレフト」、「準コピーレフト」、「非コピーレフト」の 3 つの形式に分類される。

また、各分類において、複数のライセンスが存在するが、形式毎にそのライセンスの特性が大きく異なり、また、個々のライセンスにも差異があり、ライセンスを付与する対象によってもそのあり方が変わってくる。

さらには、同じライセンス名称であっても、ライセンスのバージョンによって大きく条件が異なることもあるため、名称のみで判断することなく、ライセンスのバージョンについても注意をしなければならない。

### OSS の形式

#### コピーレフト

プログラムの実行、プログラムのリバースエンジニアリングの許可、プログラムの改変の許可、改造をしたものを含む複製物の配布の際のソースコード再配布の強制、また、組み合わせて新たに作成したプログラムを同一のライセンス下で許可されるようにしなければならない。

すべての派生製作物は誰もがソースコードにアクセス権を持ち、自由に加工し、さらに公開をして再々加工を誰もができなければならないという考え方のライセンスである。従って、このライセンスのソフトウェアを利用し配布したプログラムは、全てソースコードを開示する義務が生じ、ソースコードの改変に、派生物含めて同じライセンスを引きつぐものである。このプログラムの関係部分にもコピーレフトが適用されるので、他のライセンスのプログラムと組み合わせる場合は注意が必要となる。

#### 準コピーレフト

基本的な考え方はコピーレフト型と同様であるが、準コピーレフト型のソフトウェアを組み合わせて利用した場合は、対応するソースコードの開示を要求しないものとなる。

しかしながら、リバースエンジニアリングの許可と、ライセンスにより許諾したライブラリを利用する著作物のバイナリーコード（実行ファイル）の開示が必要となる等、一定の条件が定められていることもあるため、個別にライセンスの内容を、関連して利用すべきソフトウェアのライセンスとの整合性を精査したうえで、

#### 非コピーレフト

非コピーレフト型ライセンスを適用して公開したソースコードは、利用者が、改変して利用・再配布する際、OSS であるか否にかかわらず、利用・改造・再配布を認めることとなるライセンスである。

コピーレフト型と比して、複製物のソースコードの再配布義務がないことから、JavaScript 等のフロントエンドで、表示の微調整レベルでソースコードの変更を伴うサイトなどでは、ソースコード公開の義務に伴う負担を軽減するために、この形式をとることも多い。

コロナ対策サイトはこの中の MIT License の形態を取った。ただし、コピーレフト型のライセンスと互換性がないこともあるため、ライセンスの整合性に注意する必要がある。

#### 型式分類表

代表的なライセンスをこれらの 3 つの型式に分類すると下記の表となる。

##### 3 つの型式

| 型式 | 特徴 | 主な OSS ライセンス |
| -------- | -------- | -------- |
| コピーレフト | ・ライセンステキストの添付が必要</br>・改変した（コピー＆ペーストも含む）ソースコードの開示</br>・組み合わせて利用した場合、対応する部分のソースコードの開示 | ・GNU General Public License (GPL) Version 3</br>・Affero General Public License (AGPL) Version 3 |
| 準コピーレフト | ・ライセンステキストの添付が必要</br>・改変した（コピー＆ペーストも含む）ソースコードの開示 | ・GNU Lesser General Public License (LGPL) Version 3</br>・Mozilla Public License (MPL) 2.0 |
| 非コピーレフト | ・ライセンステキストの添付が必要</br>・ソースコードを変更したとしても、ソースコードを開示する必要はない | ・BSD 2-clause License</br>・BSD 3-clause License</br>・BSD 4-clause License</br>・Apache License 1.1</br>・Apache License 2.0</br>・MIT License |

##### コラム：MIT ライセンスの課題

新型コロナウイルス感染症の感染拡大のなかで、「東京都新型コロナウイルス感染症対策サイト」同様に、Code for Japan が感染患者の健康管理を目的とした「自宅療養者モニタリングシステム」を OSS として、GitHub 上に公開した。

この OSS については、様々な主体に活用され、感染症対策に貢献している。

一方で、本 OSS が「症状の報告」に特化したシステムとなっており、再利用する先も症状報告が多くミッションクリティカルであることから、本システムの利用ユーザは運用体制のしっかりした企業が多いと思われた。結果、OSS の特徴でもあるシビックテックなどコミュニティへの参加者は限られてしまい、フィードバック量も少なくなる恐れが出た。

このため、Code for Japan では、企業等の利用を想定し、当初、非コピーレフトの MIT ライセンスで公開していたものを、準コピーレフトである MPL ライセンスへと変更した。準コピーレフトのライセンスを選択することで、企業が営利目的で改変利用する場合でも改変後のコードを公開することが求められるため、派生系ソフトウェアが独占的な状態へ移行することを防ぐことができる。

このように、OSS は、営利、非営利に関わらず、再利用を可能とするものであるが、OSS は、社会に開かれたものであり、公共性を有するものでもあり、**東京都 OSS**においては、利用状況に応じて、公開時のライセンス規定についても、柔軟に見直していく必要がある。

### ライセンス

#### ライセンスの選定

ライセンス選定の際には、ライセンスを付与する対象となるものについて、指定するライセンスに基づき二次利用を許諾することとなる。

このため、OSS 化の趣旨や運用の際の実態と適合するものの中から、都として必要な権利を確保できるライセンスを選定するか、ライセンスの選定を開発保守業者に委ねる場合にもその選定方針を明確にし、その内容を調達仕様書で示す必要がある。

都として OSS を公開する際は、特にライセンス選定対象ソフトウェアの展開において戦略的な手法をとる必要がない場合においては、非コピーレフト型のライセンスを選定することを推奨する。

なお、都として公開する OSS のそれぞれのライセンスで配布されるソフトウェアは、都の著作権及び特許・実用新案等の知的財産権の利用許諾を、当該ライセンスで定義される条件に基づき配布することとなる点に留意すること。

#### マルチライセンス

関連して利用するソフトウェアとのライセンス不整合を解消する方法や、利用方法の多様化などへの対応方法の一つとして、複数のライセンスでの配布をすることがある。これをマルチライセンスという。

ライセンスの選定にあたって、特定の 1 つのライセンスでは、OSS 化の趣旨や運用の際の実態と適合できない場合には、複数のライセンスを組み合わせたマルチライセンスも視野に入れながら選定すること。

例として、GPL と不整合となるライセンスを選定した際に、GPL を用いる関連ソースコードとの連携が必要な際に、GPL の対象バージョンと互換するライセンスをマルチライセンスとして付与することが挙げられる。

### ライセンス選定プロセス

ソフトウェアを利用するにあたっては、動作させるために必要な関連ソフトウェアとのライセンスの整合性に関する課題があり、例えばコピーレフトのライセンスを選定したことで、実際の動作に必要なソフトウェアとのライセンスが整合せず使えない状況に陥るケースもある。この状態のまま使用してしまうと、ライセンス違反となる。

このことから、利用したい関連ソフトウェアのライセンスとの整合性に留意のうえ、ライセンス選定をする必要がある。

ライセンスを選定するにあたり基本的な考え方を下記に図示する。

#### ライセンスの選定フローイメージ

![ライセンスの選定フローイメージ](https://i.imgur.com/qqLEMet.png)

#### マルチライセンスの選定フローイメージ

![マルチライセンスの選定フローイメージ](https://i.imgur.com/GNZKtiZ.jpg)

都としては、上記のフローで単一のライセンスを決定し、ライセンスを付与することを基本とするが、当初想定していた状況との変化があった場合や、利用方法の多様化に対応していく必要がある場合には、マルチライセンスにより対応するか、または、OSS のバージョンを改め別ライセンスで配布をするかを検討のうえ、配布する。

ただし、派生元の OSS が存在する場合は、その派生元のライセンスとの整合性に留意し、ライセンス違反を起こさないよう注意すること。

なお、本ガイドラインにおけるライセンスとは、OSI がライセンスレビューを行い承認しているものを指す。

## 公開・運用にあたっての注意事項

都が OSS を公開する上では、セキュリティやコンプライアンス、事業内容やサービス内容に対して留意する必要があり、それらの内容も可能な限り都民に開示していく必要がある。このことから、公開にあたっては、所謂 "README" ファイルに、以下の事項を参考に必要事項を明記するものとする。

なお、記載内容に関しては、公開するソースコードに関係する事業の性格や、公開することによる社会的波及効果等を考慮の上、事前に各局の法務担当と連携のうえ、確定していくようにすること。

また、注意事項として、既存のソフトウェアの改変等による公開の場合は、「[公開時のライセンス](#公開時のライセンス)」に記載しているよう、コピーレフトでは同一のライセンスを継承する必要があることから、当該ソフトウェアのライセンスを事前に精査し、そのライセンス条件に適合するよう検討する必要がある。

### README ファイルへの記載事項例

#### コンプライアンス情報

1. ソフトウェアを利用する際にプライバシーに関連する内容（個人情報保護法や GDPR 等）が含まれる場合は、利用者に責任があるものとし、都は一切の責任を負わないものとします。
1. コンプライアンス等の問題によって、公開の継続が困難又は利用不可となる可能性がありますので、あらかじめご了承願います。

#### 損害賠償等

1. 本ソフトウェアの利用に関する責任は利用者にあるものとし、使用・不使用から生ずるいかなる損害や、利用者（及び第三者）が被った損害について、一切責任を負わないものとします。また、損害の可能性について事前に知らされていた場合にも同様とします。
1. 本ソフトウェアの脆弱性に関する瑕疵について、一切責任を負わないものとします。
1. 一切の紛争は、東京地方裁判所を第一審の所轄裁判所とし、本ソフトウェアの使用については日本国法に準拠するものとします。

#### ご利用にあたってのお願い

本ソフトウェアのご利用にあたっては、今後の東京都の施策に活かしていくため、可能な限り東京都にお知らせください。

#### README ファイルへのその他記載事項

公開に伴い、様々なユーザからの貢献が寄せられることが想定されるため、行動規範、開発者貢献記録、貢献者ライセンス同意書等を合わせて記載することが望ましい。

| 用語 | 意味 |
| -------- | -------- |
| 行動規範 (Code of Conduct) | オープンソフトを提供する上で、その提供理念等を明確にし、参加者や貢献者に対して期待する振る舞い等を定めたもの|
| 開発者貢献記録 (Developer’s Certificate of Origin) | 適切なオープンソースライセンスに基づき貢献することを宣誓し、その貢献と派生的な作業が誰の手によるものかを特定可能としたもの |
| 貢献者ライセンス同意書 (Contributor License Agreement) | オープンソフトの開発プロジェクト等において、個人が行った貢献に対して、知的財産権の許諾を得ていることを明確にするもの |

## フォローアップと見直し

本ガイドラインは、OSS として公開することによる効果（貢献）に視点を置き、β版として策定している。

このため、今後、本ガイドラインを運用していくなかで、OSS として都のソースコードを公開することによる効果（市民、企業、大学、NPOなど多様なプレイヤーとのコラボレーション）を幅広く普及していくとともに、個別のプロジェクトでガイドラインの実効性を検証していく。

あわせて、都として、他自治体等が公開する OSS を利活用するという観点での必要なルール等についても、引き続き検討を行っていく。

また、本ガイドラインを、GitHub に公開することで、さらに多くのエンジニアの方々にもご覧いただき、改善点の把握に努めていくなどのフォローアップを実施し、継続的に必要な見直しを行っていくものとする。
